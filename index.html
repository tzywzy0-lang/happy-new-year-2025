<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>✨仅属于你的时光✨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000;
            overflow: hidden;
            display: flex;
            perspective: 1000px; /* 3D视距 */
            height: 100vh;
            align-items: center;
            justify-content: center;
            font-family: 'Microsoft YaHei', sans-serif;
        }

        /* 启动遮罩层 */
        #start-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(45deg, #1a1a1a, #000);
            z-index: 999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #fff;
            transition: opacity 1s;
        }
        #start-btn {
            padding: 15px 40px;
            border: 1px solid #fff;
            border-radius: 30px;
            background: transparent;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            animation: pulse 2s infinite;
        }

        /* 3D 旋转容器 */
        #drag-container {
            position: relative;
            display: flex;
            transform-style: preserve-3d;
            transform: rotateX(-10deg);
        }
        
        #spin-container {
            position: relative;
            display: flex;
            width: 120px; /* 照片宽度 */
            height: 170px; /* 照片高度 */
            transform-style: preserve-3d;
            /* 自动旋转动画 */
            animation: spinRevert 20s infinite linear; 
        }

        /* 照片样式 */
        #spin-container img {
            position: absolute;
            left: 0; top: 0;
            width: 100%; height: 100%;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 0 8px #fff;
            -webkit-box-reflect: below 10px linear-gradient(transparent, transparent, #0005);
        }

        /* 中心文字 */
        #spin-container p {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(90deg);
            color: #fff;
            font-size: 20px;
            white-space: nowrap;
            text-shadow: 0 0 10px #ff00de;
        }

        /* 地面发光效果 */
        #ground {
            width: 900px;
            height: 900px;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(90deg);
            background: -webkit-radial-gradient(center center, farthest-side , #9993, transparent);
        }

        /* 动画定义 */
        @keyframes spin {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }
        @keyframes spinRevert {
            from { transform: rotateY(360deg); }
            to { transform: rotateY(0deg); }
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 rgba(255,255,255,0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,255,255,0); }
            100% { transform: scale(1); box-shadow: 0 0 0 rgba(255,255,255,0); }
        }
        
        /* 唯美粒子背景 */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
        }
    </style>
</head>
<body>

    <!-- 1. 启动页 (为了让音乐能自动播放) -->
    <div id="start-screen">
        <h2 style="font-weight:300; margin-bottom:10px;">准备好接收惊喜了吗？</h2>
        <button id="start-btn">开启回忆 ✨</button>
    </div>

    <!-- 2. 音乐 (记得放入 music.mp3) -->
    <audio id="bgm" src="music.mp3" loop></audio>

    <!-- 3. 相册容器 -->
    <div id="drag-container">
        <div id="spin-container">
            <!-- 
               这里是照片区 
               src="1.jpg" 代表第一张照片
               你可以加更多，比如 <img src="8.jpg" alt="">
            -->
            <img src="1.jpg" alt="">
            <img src="2.jpg" alt="">
            <img src="3.jpg" alt="">
            <img src="4.jpg" alt="">
            <img src="5.jpg" alt="">
            <img src="6.jpg" alt="">
            
            <!-- 中心的一句情话 -->
            <p>2025，岁岁常欢愉</p>
        </div>
        <div id="ground"></div>
    </div>

    <canvas class="stars" id="stars"></canvas>

<script>
    // --- 配置区 ---
    // 照片数量越多，圆环越大。如果你加了照片，不用改代码，会自动适应。
    const radius = 240; // 相册半径，手机端可以适当调小比如 180
    const autoRotate = true; // 是否自动旋转
    const rotateSpeed = -60; // 旋转速度

    // --- 逻辑区 ---
    
    // 1. 初始化相册位置
    const oSpin = document.getElementById('spin-container');
    const aImg = oSpin.getElementsByTagName('img');
    const aEle = [...aImg]; 
    
    oSpin.style.width = aImg[0].width + "px";
    oSpin.style.height = aImg[0].height + "px";

    function init(delayTime) {
        for (let i = 0; i < aEle.length; i++) {
            aEle[i].style.transform = `rotateY(${i * (360 / aEle.length)}deg) translateZ(${radius}px)`;
            aEle[i].style.transition = "transform 1s";
            aEle[i].style.transitionDelay = delayTime || (aEle.length - i) / 4 + "s";
        }
    }

    // 2. 启动按钮逻辑
    const startScreen = document.getElementById('start-screen');
    const startBtn = document.getElementById('start-btn');
    const bgm = document.getElementById('bgm');

    startBtn.onclick = function() {
        startScreen.style.opacity = 0;
        setTimeout(() => startScreen.style.display = 'none', 1000);
        
        // 尝试播放音乐
        bgm.play().catch(() => console.log("浏览器限制自动播放，需交互"));
        
        // 相册展开动画
        setTimeout(() => init(1), 100);
    };

    // 3. 简单的触摸/鼠标拖拽交互
    let sX, sY, nX, nY, desX = 0, desY = 0, tX = 0, tY = 10;

    document.onpointerdown = function (e) {
        clearInterval(oSpin.timer);
        e = e || window.event;
        var sX = e.clientX,
            sY = e.clientY;

        this.onpointermove = function (e) {
            e = e || window.event;
            var nX = e.clientX,
                nY = e.clientY;
            desX = nX - sX;
            desY = nY - sY;
            tX += desX * 0.1;
            tY += desY * 0.1;
            applyTranform(oSpin);
            sX = nX;
            sY = nY;
        };

        this.onpointerup = function (e) {
            this.onpointermove = this.onpointerup = null;
            oSpin.timer = setInterval(function () {
                desX *= 0.95;
                desY *= 0.95;
                tX += desX * 0.1;
                tY += desY * 0.1;
                applyTranform(oSpin);
                playSpin(false);
                if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                    clearInterval(oSpin.timer);
                    playSpin(true);
                }
            }, 17);
        };
        return false;
    };

    function applyTranform(obj) {
        if(tY > 180) tY = 180;
        if(tY < 0) tY = 0;
        obj.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
    }

    function playSpin(yes) {
        oSpin.style.animationPlayState = (yes ? 'running' : 'paused');
    }

    // 4. 星空背景
    const canvas = document.getElementById('stars');
    const ctx = canvas.getContext('2d');
    let width, height, stars = [];

    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    for(let i=0; i<100; i++) stars.push({x: Math.random()*width, y: Math.random()*height, r: Math.random()*2, a: Math.random()});

    function drawStars() {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = "white";
        stars.forEach(s => {
            ctx.globalAlpha = s.a;
            ctx.beginPath();
            ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
            ctx.fill();
            s.y -= 0.5; // 上浮
            if(s.y < 0) s.y = height;
        });
        requestAnimationFrame(drawStars);
    }
    drawStars();

</script>
</body>
</html>
